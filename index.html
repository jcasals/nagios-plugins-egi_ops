<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Nagios Plugins EGI OPS : This is a Nagios plugin to check EGI OPS Test in the new ARGO platform">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Nagios Plugins EGI OPS</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jcasals/nagios-plugins-egi_ops">View on GitHub</a>

          <h1 id="project_title">Nagios Plugins EGI OPS</h1>
          <h2 id="project_tagline">This is a Nagios plugin to check EGI OPS Test in the new ARGO platform</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jcasals/nagios-plugins-egi_ops/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jcasals/nagios-plugins-egi_ops/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="nagios-plugin-for-egi-ops" class="anchor" href="#nagios-plugin-for-egi-ops" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nagios Plugin for EGI OPS</h1>

<h3>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h3>

<p>This is a Nagios plugin to check EGI OPS Test in the new ARGO platform.</p>

<p>This check uses the information from the ARGO API and parses it and prints out the status of the service with detailed views for every host and links to the hosts that have Warning or Critical status.</p>

<h3>
<a id="authors" class="anchor" href="#authors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors</h3>

<p>Jordi Casals (<a href="http://www.pic.es">PIC</a>).</p>

<p>Contact: jcasals (at) pic (dot) es</p>

<h3>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changelog</h3>

<p><em>Fri Mar 18 2016</em><br>
<strong>1.0.0</strong> First Release!</p>

<h3>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h3>

<p>It consists on a Bash script and the only requirement is to have <a href="http://stedolan.github.io/jq/">JQ</a> package installed, a simple and flexible JSON processor for bash.</p>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<p>You just have to install it via RPM and, if you don't have JQ on your server, it will install it as requirement.</p>

<pre><code>$ rpm -i nagios-plugins-egi_ops-1.0.0-1.el6.x86_64
</code></pre>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h3>

<pre><code>$ /usr/lib64/nagios/plugins/check_egi_ops -s &lt;site&gt; -x &lt;service1[,service2,...]&gt; -r &lt;report&gt;
</code></pre>

<p>As you can see it has four parameters. </p>

<ul>
<li>Site (-s), service(s) (-x) and report type (-r).</li>
</ul>

<p>You can see an example of how it works by running it on your command line:</p>

<pre><code>[user@host ]# /usr/lib64/nagios/plugins/check_egi_ops -s pic -x CREAM-CE,SRMv2 -r Critical
CREAM-CE: OK // SRMv2: OK

HOSTS
======
CREAM-CE
ce11.pic.es: OK
ce10.pic.es: OK
ce09.pic.es: OK
ce08.pic.es: OK
ce07.pic.es: OK

SRMv2
srmlhcb.pic.es: OK
srmcms.pic.es: OK
srmatlas.pic.es: OK
srm.pic.es: OK
</code></pre>

<h3>
<a id="setup-for-nagios" class="anchor" href="#setup-for-nagios" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup for Nagios</h3>

<p>To add the plugin to your Nagios System you just have to create a command as you usually do with other plugins. A sample of command line input on the NagiosQL setup can be:</p>

<pre><code>$USER1$/check_egi_ops -s $ARG1$ -x $ARG2$ -r $ARG3$
</code></pre>

<p>Or if you prefer, you can create this command on your <em>commands.cfg</em> file:</p>

<pre><code>define command {
    command_name    check_egi_ops
    command_line    $USER1$/check_egi_ops -s $ARG1$ -x $ARG2$ -r $ARG3$
}
</code></pre>

<h4>
<a id="optional-setup-for-nagios" class="anchor" href="#optional-setup-for-nagios" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Optional Setup for Nagios</h4>

<p>We tried to add a little more information to the Nagios output, so we wanted to add links that points out to the errors, in case it was an error. We found there are some characters not admitted, and that the HTML is disabled in the output. </p>

<p>To change this you have to modify two files.</p>

<p><strong><em>/usr/local/nagios/etc/cgi.cfg</em></strong> <em>or your equivalent cgi.cfg</em></p>

<pre><code># escape_html_tags=1
escape_html_tags=0
</code></pre>

<p><strong><em>/usr/local/nagios/etc/nagios.cfg</em></strong> <em>or your equivalent nagios.cfg or icinga.cfg</em></p>

<pre><code># illegal_object_name_chars=`~!$%^&amp;*|'"&lt;&gt;?,()=
illegal_object_name_chars=`~!$%^&amp;*|'"?,()=
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Nagios Plugins EGI OPS maintained by <a href="https://github.com/jcasals">jcasals</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
